<%# temp level management ici CM2 %>

<div class="classroom-level-selectors">
	<% @grades.each do |classroom_grade| %>
		<%= link_to skills_path(grade: classroom_grade ) do %>
			<div class="class-pill <%= 'active' if classroom_grade == @grade %> ">
				<%= classroom_grade.upcase %>
			</div>
		<% end %>
	<% end %>
  <h1 class=''>Mes Compétences</h1>
</div>
<div  class="skills-classroom-level-card"
      data-controller='allskilldisplay'
      >
	<div class="skills">
		<% WorkPlanDomain::DOMAINS[@grade].each do |domain| %>
			<div class="domain-tab"
        data-allskilldisplay-target="domainBtn"
        data-domain = "<%=domain%>"
        data-action = 'click->allskilldisplay#displayDomain'
        <%# indicate if domain is special true && not CME && in special domain %>
        data-special="<%= @are_special_domains && @grade != 'CM2' && domain.in?(WorkPlanDomain::DOMAINS_SPECIALS)%>">
				<%= domain %>
			</div>
		<% end %>
	</div>
	<div class="all-skills">
		<div class="skill_level-selectors">
			<% for skill_level in (1..7) do%>
				<div class="skill_level-selector"  data-level="<%=skill_level%>"
        data-action="click->allskilldisplay#displaySkills"
					data-allskilldisplay-target="leveltBtn">
					<i class=" fas fa-bacon belt-<%= skill_level %> font-weight-bold"></i>
				</div>
			<% end %>
		</div>
		<% WorkPlanDomain::DOMAINS[@grade].each do |domain| %>
			<div class="skills_boxe <%= 'd-none 'unless domain == WorkPlanDomain::DOMAINS[@grade].first%>"
      data-domain='<%=domain%>'
      data-allskilldisplay-target='domainCard'>
				<%# <% domain = WorkPlanDomain::DOMAINS[@grade].first %>
				<% for skill_level in (1..7) do %>
					<% skills = @skills.select {|skill| skill.level == skill_level && skill.domain == domain} %>
					<div class="skills-display d-none"
          data-allskilldisplay-target='levelSkillCard'
          data-grade='<%=@grade%>'
          data-level='<%=skill_level%>'>
						<% skills.each do |skill| %>
							<div class='border-skill justify-content-between mt-2'
                   data-allskilldisplay-target='skillCard'>
								<div>
									<%= skill.symbol%>
									<%= skill.name%>
								</div>
								<%# Button remmove Skill %>
								<div>
									<%= link_to skills_path(skill), method: :delete, data: { confirm: "Voulez vous enlever cette compétence?" } do %>
										<div class='rmv-skill-btn'>
											<i class="far fa-times-circle"></i>
										</div>
									<% end %>
								</div>
								<%#  %>
							</div>
						<% end %>
					</div>
				<% end %>
			</div>
		<% end %>
	</div>
</div>
