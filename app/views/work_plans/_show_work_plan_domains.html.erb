<%# work_plan.work_plan_domains.each do |work_plan_domain| %>
<%# <%raise %>
<%= turbo_frame_tag :domain_list do %>
  <% unless  @domains.nil? %>
    <% @domains.each do |work_plan_domains| %>
      <%# <% wpd2 = work_plan.work_plan_domains.where(domain: "#{work_plan_domains}") %>
      <% wpd2 =
        work_plan
          .work_plan_domains
          .select { |work_plan_domain| work_plan_domain.domain == work_plan_domains }
          .sort_by(&:level) %>
      <% unless wpd2.empty? %>
        <% wpd2.each do |work_plan_domain| %>
          <%# boucle sur les work_plan_domains %>

          <%= render "work_plan_domains/work_plan_domain", work_plan_domain: work_plan_domain %>

        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
<div id='bottom'></div>

<%= turbo_frame_tag :edit_new_domain do %>
  <%= link_to new_work_plan_work_plan_domain_path(work_plan, WorkPlanDomain.new),
    class:"add-skill-btn" do %>
    <h6>Ajouter un domaine</h6>
    <i class="fas fa-chevron-down"></i>
  <% end %>
<% end %>
