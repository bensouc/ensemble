<div class="student-sticky-header">
  <div class='progess-header'>
    <div class="d-flex align-items-baseline print-date prog-name" data-controller='wps-result'>
      <h1>Progression de <%= @student.first_name %></h1>
      <%= link_to  student_auto_new_wp_path(@student), method: :post, data:{ action: "mouseover->wps-result#displayName mouseout->wps-result#hideName click->loadingspinnermgnt#displaySpinner"} do%>
        <i class="fa-solid fa-user-gear printer-logo ms-4"></i>
      <% end %>
      <div class="autogene-details d-none" data-wps-result-target='name'>
        Générer automatiquement le <br>
        prochain Plan de travail
      </div>
    </div>
    <div class="print-date">
      <h4>
        <%= link_to '#' ,:onclick => "window.print();return false;" do %>
          <i class="fa-solid fa-print printer-logo"></i>
        <% end %>
        Le <%=I18n.l(Date.today, format: :long) %>
      </h4>
    </div>
  </div>
  <div class="top">
    <div class=" results-header domain-level nocolor">
    </div>
    <div class="d-flex">
      <% @domains.each do |domain| %>
        <div class="domain-header">
          <%= domain %>
        </div>
      <% end %>
    </div>
  </div>
</div>
<div class="results d-flex">
  <div class="left_levels">
    <% WorkPlanDomain::LEVELS.reverse_each do |level| %>
      <div class="domain-level mb-2">
        <i class=" fas fa-bacon belt-<%= level %> belt-result font-weight-bold"></i>
        <strong><%= @belt[level - 1].capitalize %></strong>
      </div>
    <% end %>
  </div>
  <div class="right-levels d-flex">
    <% @domains.each do |domain| %>
      <div class="domain-main-col">
        <% WorkPlanDomain::LEVELS.reverse_each do |level| %>
          <%belt = @belts.select{|belt| belt.domain == domain && belt.level== level}.last%>
          <% if !belt.nil? && belt != [] && belt.completed? %>
            <div class="domain-col cells-student mb-2">
              <%= render "resultat_belt", level: level, domain: domain , belt: belt%>
            </div>
          <%# <% elsif !belt.nil? %>
            <%# <div class="domain-col cells-student mb-2"> %>
              <%# <%= render "shared/validate_belt_btn", level: level, domain: domain%>
              <%# <%= render "resultat_cell", level: level, domain: domain %>
            <%# </div> %>
          <% else %>
            <div class="domain-col cells-student mb-2"
                data-controller='display-student-belt-management'
                data-action='mouseover->display-student-belt-management#displayBtn mouseout->display-student-belt-management#hideBtn'>
              <%= render "resultat_cell", level: level, domain: domain %>
              <%# <%= render "shared/validate_belt_btn", level: level, domain: domain%>
            </div>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
